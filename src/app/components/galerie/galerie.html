<!-- Galerie Header -->
<div class="bg-black py-16 px-4">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-4xl md:text-6xl font-bold text-[#fffe03] uppercase text-center mb-4 tracking-wide">Galerie</h1>
    <p class="text-white text-center text-base md:text-lg">Revivez les meilleurs moments de VASKO</p>
  </div>
</div>

<!-- Filtres -->
<div class="bg-zinc-900 py-8 px-4">
  <div class="max-w-6xl mx-auto">
    <div class="flex justify-center gap-2 md:gap-4 flex-wrap">
      @for (filtre of filtres; track filtre.valeur) {
        <button 
          (click)="setFiltre(filtre.valeur)"
          [class]="filtreActif === filtre.valeur 
            ? 'bg-[#fffe03] text-black border-2 border-[#fffe03] px-4 md:px-6 py-2 font-bold rounded-lg transition-all duration-300 text-sm md:text-base' 
            : 'bg-black text-white border-2 border-[#fffe03] px-4 md:px-6 py-2 font-bold rounded-lg hover:bg-[#fffe03] hover:text-black transition-all duration-300 text-sm md:text-base'">
          {{ filtre.nom }}
        </button>
      }
    </div>
  </div>
</div>

<!-- Galerie Grille -->
<div class="bg-black py-20 px-4">
  <div class="max-w-6xl mx-auto">
    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-6">
      @for (photo of getFotosFiltrees(); track photo.id) {
        <app-picture-card 
          [imageSrc]="photo.image" 
          [imageAlt]="photo.titre" 
          [label]="photo.titre" 
          [description]="photo.description" 
          [date]="photo.date"
          (cardClick)="ouvrirLightbox(photo)">
        </app-picture-card>
      }
    </div>
    
    @if (getFotosFiltrees().length === 0) {
      <div class="text-center py-16">
        <p class="text-white text-xl">Aucune photo dans cette catégorie.</p>
      </div>
    }
  </div>
</div>

<!-- Lightbox Modal -->
@if (lightboxActive && photoSelectionnee) {
  <div 
    (click)="fermerLightbox()"
    class="fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4">
    <div (click)="$event.stopPropagation()" class="max-w-4xl w-full">
      <!-- Image -->
      <div class="relative mb-4">
        <img 
          [src]="photoSelectionnee.image" 
          [alt]="photoSelectionnee.titre" 
          class="w-full rounded-lg max-h-[70vh] object-contain">
        
        <!-- Navigation -->
        <button 
          (click)="precedent()"
          class="absolute left-4 top-1/2 -translate-y-1/2 bg-[#fffe03] text-black p-3 rounded-full hover:scale-110 transition-all duration-300">
          ←
        </button>
        <button 
          (click)="suivant()"
          class="absolute right-4 top-1/2 -translate-y-1/2 bg-[#fffe03] text-black p-3 rounded-full hover:scale-110 transition-all duration-300">
          →
        </button>
        
        <!-- Fermer -->
        <button 
          (click)="fermerLightbox()"
          class="absolute top-4 right-4 bg-[#fffe03] text-black p-2 rounded-full hover:scale-110 transition-all duration-300 text-2xl font-bold">
          ✕
        </button>
      </div>
      
      <!-- Infos -->
      <div class="bg-zinc-900 p-6 rounded-lg">
        <h2 class="text-2xl font-bold text-[#fffe03] mb-2">{{photoSelectionnee.titre}}</h2>
        <p class="text-white mb-4">{{photoSelectionnee.description}}</p>
        <div class="flex justify-between items-center flex-wrap gap-4">
          <div class="text-white">
            <p class="text-gray-400 text-sm">Date</p>
            <p class="font-bold">{{photoSelectionnee.date}}</p>
          </div>
          <div class="text-white">
            <p class="text-gray-400 text-sm">Catégorie</p>
            <p class="font-bold capitalize">{{photoSelectionnee.categorie}}</p>
          </div>
          <div class="text-white">
            <p class="text-gray-400 text-sm">Lieu</p>
            <p class="font-bold">{{photoSelectionnee.lieu}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
}
